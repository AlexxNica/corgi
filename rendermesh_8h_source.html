<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>CORGI: rendermesh.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,400italic,500,500italic,700,700italic|Roboto+Mono:400,700" rel="stylesheet">
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="commonprojectlogo">
    <img alt="Logo" src="fpl_logo_small.png"/>
  </td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">CORGI
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="usergroup0.html"><span>Programmer's&#160;Guide</span></a></li>
      <li class="current"><a href="corgi_api_reference.html"><span>API&#160;reference</span></a></li>
      <li><a href="corgi_readme.html"><span>Readme</span></a></li>
      <li><a href="contributing.html"><span>Contributing</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li class="current"><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('rendermesh_8h_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">rendermesh.h</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright 2015 Google Inc. All rights reserved.</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// you may not use this file except in compliance with the License.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// You may obtain a copy of the License at</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//     http://www.apache.org/licenses/LICENSE-2.0</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// Unless required by applicable law or agreed to in writing, software</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">// See the License for the specific language governing permissions and</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">// limitations under the License.</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#ifndef CORGI_COMPONENT_LIBRARY_RENDERMESH_H_</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define CORGI_COMPONENT_LIBRARY_RENDERMESH_H_</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="component_8h.html">corgi/component.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="camera__interface_8h.html">corgi_component_library/camera_interface.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="transform_8h.html">corgi_component_library/transform.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;fplbase/asset_manager.h&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;fplbase/mesh.h&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;fplbase/renderer.h&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;fplbase/shader.h&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;library_components_generated.h&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;mathfu/constants.h&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;mathfu/glsl_mappings.h&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;mathfu/matrix_4x4.h&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="keyword">namespace </span>corgi {</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="keyword">namespace </span>component_library {</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">// Data for scene object components.</span></div>
<div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="structcorgi_1_1component__library_1_1_render_mesh_data.html">   34</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structcorgi_1_1component__library_1_1_render_mesh_data.html">RenderMeshData</a> {</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  <a class="code" href="structcorgi_1_1component__library_1_1_render_mesh_data.html">RenderMeshData</a>()</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;      : mesh(<span class="keyword">nullptr</span>),</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;        shader(<span class="keyword">nullptr</span>),</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;        tint(mathfu::kOnes4f),</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;        mesh_filename(<span class="stringliteral">&quot;&quot;</span>),</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;        shader_filename(<span class="stringliteral">&quot;&quot;</span>),</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;        z_depth(0),</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;        culling_mask(0),</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        pass_mask(0),</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        visible(<span class="keyword">true</span>),</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        default_pose(<span class="keyword">false</span>),</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        num_shader_transforms(0),</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        shader_transforms(<span class="keyword">nullptr</span>) {}</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  ~<a class="code" href="structcorgi_1_1component__library_1_1_render_mesh_data.html">RenderMeshData</a>() {</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="keyword">delete</span>[] shader_transforms;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    shader_transforms = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  }</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <span class="comment">// Implement move operator to avoid reallocating shader_transforms.</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <a class="code" href="structcorgi_1_1component__library_1_1_render_mesh_data.html">RenderMeshData</a>(<a class="code" href="structcorgi_1_1component__library_1_1_render_mesh_data.html">RenderMeshData</a>&amp;&amp; other) { *<span class="keyword">this</span> = std::move(other); }</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <a class="code" href="structcorgi_1_1component__library_1_1_render_mesh_data.html">RenderMeshData</a>&amp; operator=(<a class="code" href="structcorgi_1_1component__library_1_1_render_mesh_data.html">RenderMeshData</a>&amp;&amp; other) {</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    mesh = std::move(other.mesh);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    shader = std::move(other.shader);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    tint = std::move(other.tint);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    mesh_filename = std::move(other.mesh_filename);</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    shader_filename = std::move(other.shader_filename);</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    z_depth = std::move(other.z_depth);</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    culling_mask = std::move(other.culling_mask);</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    pass_mask = std::move(other.pass_mask);</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    visible = std::move(other.visible);</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    default_pose = std::move(other.default_pose);</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    num_shader_transforms = other.num_shader_transforms;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    shader_transforms = other.shader_transforms;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    other.shader_transforms = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    other.num_shader_transforms = 0;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  }</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  fplbase::Mesh* mesh;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  fplbase::Shader* shader;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  mathfu::vec4 tint;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  std::string mesh_filename;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  std::string shader_filename;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <span class="keywordtype">float</span> z_depth;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> culling_mask;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> pass_mask;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <span class="keywordtype">bool</span> visible;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <span class="keywordtype">bool</span> default_pose;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  uint8_t num_shader_transforms;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  mathfu::AffineTransform* shader_transforms;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="comment">// Disallow copies. They&#39;re inefficient with the shader_transforms array.</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <a class="code" href="structcorgi_1_1component__library_1_1_render_mesh_data.html">RenderMeshData</a>(<span class="keyword">const</span> <a class="code" href="structcorgi_1_1component__library_1_1_render_mesh_data.html">RenderMeshData</a>&amp;);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <a class="code" href="structcorgi_1_1component__library_1_1_render_mesh_data.html">RenderMeshData</a>&amp; operator=(<span class="keyword">const</span> <a class="code" href="structcorgi_1_1component__library_1_1_render_mesh_data.html">RenderMeshData</a>&amp;);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;};</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">// Struct used for keeping track of and sorting our render lists:</span></div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="structcorgi_1_1component__library_1_1_renderlist_entry.html">   94</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structcorgi_1_1component__library_1_1_renderlist_entry.html">RenderlistEntry</a> {</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <a class="code" href="structcorgi_1_1component__library_1_1_renderlist_entry.html">RenderlistEntry</a>(<a class="code" href="classcorgi_1_1_vector_pool_1_1_vector_pool_reference.html">EntityRef</a> entity_, <a class="code" href="structcorgi_1_1component__library_1_1_render_mesh_data.html">RenderMeshData</a>* data_)</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      : entity(entity_), data(data_) {}</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <a class="code" href="classcorgi_1_1_vector_pool_1_1_vector_pool_reference.html">EntityRef</a> entity;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <a class="code" href="structcorgi_1_1component__library_1_1_render_mesh_data.html">RenderMeshData</a>* data;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="keywordtype">bool</span> operator&lt;(<span class="keyword">const</span> <a class="code" href="structcorgi_1_1component__library_1_1_renderlist_entry.html">RenderlistEntry</a>&amp; other)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordflow">return</span> (data-&gt;z_depth &lt; other.data-&gt;z_depth);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  }</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="keywordtype">bool</span> operator&gt;(<span class="keyword">const</span> <a class="code" href="structcorgi_1_1component__library_1_1_renderlist_entry.html">RenderlistEntry</a>&amp; other)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keywordflow">return</span> (data-&gt;z_depth &gt; other.data-&gt;z_depth);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  }</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;};</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div>
<div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="classcorgi_1_1component__library_1_1_render_mesh_component.html">  109</a></span>&#160;<span class="keyword">class </span><a class="code" href="classcorgi_1_1component__library_1_1_render_mesh_component.html">RenderMeshComponent</a> : <span class="keyword">public</span> <a class="code" href="classcorgi_1_1_component.html">Component</a>&lt;RenderMeshData&gt; {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> kDefaultCullDist = 80;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <a class="code" href="classcorgi_1_1component__library_1_1_render_mesh_component.html">RenderMeshComponent</a>()</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      : asset_manager_(<span class="keyword">nullptr</span>),</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        culling_distance_squared_(kDefaultCullDist * kDefaultCullDist) {}</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="keyword">virtual</span> ~<a class="code" href="classcorgi_1_1component__library_1_1_render_mesh_component.html">RenderMeshComponent</a>() {}</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classcorgi_1_1component__library_1_1_render_mesh_component.html#ae4668233d5dc9ea93cfe9471ef84775d">Init</a>();</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classcorgi_1_1component__library_1_1_render_mesh_component.html#ab0462ba9516a7327c2f07a8621b39f5c">AddFromRawData</a>(<a class="code" href="classcorgi_1_1_vector_pool_1_1_vector_pool_reference.html">EntityRef</a>&amp; entity, <span class="keyword">const</span> <span class="keywordtype">void</span>* raw_data);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="keyword">virtual</span> <a class="code" href="classcorgi_1_1_component_interface.html#a8fcb3126b70ec692558ecb4ba7e50eb2">RawDataUniquePtr</a> <a class="code" href="classcorgi_1_1component__library_1_1_render_mesh_component.html#a38c1ef58ad2612b6c2f1abbdd1e5264b">ExportRawData</a>(<span class="keyword">const</span> <a class="code" href="classcorgi_1_1_vector_pool_1_1_vector_pool_reference.html">EntityRef</a>&amp; entity) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classcorgi_1_1component__library_1_1_render_mesh_component.html#a4d7fe3e860e1ae50e396fa3ca44013b0">InitEntity</a>(<a class="code" href="classcorgi_1_1_vector_pool_1_1_vector_pool_reference.html">EntityRef</a>&amp; <span class="comment">/*entity*/</span>);</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="comment">// Nothing really happens per-update to these things.</span></div>
<div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="classcorgi_1_1component__library_1_1_render_mesh_component.html#ae3f54f9784d1db919d147012eb663dd6">  125</a></span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classcorgi_1_1component__library_1_1_render_mesh_component.html#ae3f54f9784d1db919d147012eb663dd6">UpdateAllEntities</a>(<a class="code" href="group__corgi__entity.html#ga754f75a6aad33aa11de5084743ee3f98">WorldTime</a> <span class="comment">/*delta_time*/</span>) {}</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="comment">// Prepares to do rendering.  (Must be called before any RenderPass calls.)</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="comment">// Pregenerates the draw lists, sorted by z-depth, and applies frustrum</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="comment">// culling.  (So that renderpass can just iterate through the list and draw</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="comment">// everything with minimum of fuss.)</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="keywordtype">void</span> RenderPrep(<span class="keyword">const</span> <a class="code" href="classcorgi_1_1_camera_interface.html">CameraInterface</a>&amp; camera);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <span class="comment">// Renders all entities marked as being part of the specified renderpass to</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <span class="comment">// the current output buffer.  Shader_override is an optional parameter, which</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <span class="comment">// (if provided) overrides the mesh-specified shader, and instead renders</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <span class="comment">// the entire pass with override_shader.</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="keywordtype">void</span> RenderPass(<span class="keywordtype">int</span> pass_id, <span class="keyword">const</span> <a class="code" href="classcorgi_1_1_camera_interface.html">CameraInterface</a>&amp; camera,</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                  fplbase::Renderer&amp; renderer);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <span class="keywordtype">void</span> RenderPass(<span class="keywordtype">int</span> pass_id, <span class="keyword">const</span> <a class="code" href="classcorgi_1_1_camera_interface.html">CameraInterface</a>&amp; camera,</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                  fplbase::Renderer&amp; renderer,</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                  <span class="keyword">const</span> fplbase::Shader* shader_override);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <span class="comment">// Goes through and renders every entity that is visible from the camera,</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <span class="comment">// in pass order.  Is equivalent to iterating through all of the passes</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <span class="comment">// and calling RenderPass on each one.</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="comment">// Important!  You must have called RenderPrep first, in order to</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <span class="comment">// pre-populate the lists of things visible from the camera!</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="keywordtype">void</span> RenderAllEntities(fplbase::Renderer&amp; renderer,</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                         <span class="keyword">const</span> <a class="code" href="classcorgi_1_1_camera_interface.html">CameraInterface</a>&amp; camera);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="comment">// Recursively sets the hidden-ness of the entity and all children.</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <span class="keywordtype">void</span> SetVisibilityRecursively(<span class="keyword">const</span> <a class="code" href="classcorgi_1_1_vector_pool_1_1_vector_pool_reference.html">EntityRef</a>&amp; entity, <span class="keywordtype">bool</span> visible);</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <span class="comment">// Get and set the light position.  This is a special uniform that is sent</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <span class="comment">// to all shaders without having to declare it explicitly in the</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <span class="comment">// shader_instance variable.</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  mathfu::vec3 light_position() { <span class="keywordflow">return</span> light_position_; }</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <span class="keywordtype">void</span> set_light_position(<span class="keyword">const</span> mathfu::vec3&amp; light_position) {</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    light_position_ = light_position;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  }</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <span class="keywordtype">void</span> SetCullDistance(<span class="keywordtype">float</span> distance) {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    culling_distance_squared_ = distance * distance;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  }</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <span class="keywordtype">float</span> culling_distance_squared()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> culling_distance_squared_; }</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="keywordtype">void</span> set_culling_distance_squared(<span class="keywordtype">float</span> culling_distance_squared) {</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    culling_distance_squared_ = culling_distance_squared;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  }</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <span class="comment">// todo(ccornell) expand this if needed - make an array for multiple lights.</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="comment">// Also maybe make this into a full fledged struct to store things like</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="comment">// intensity, color, etc.  (Low priority - none of our shaders support</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <span class="comment">// these.)</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  mathfu::vec3 light_position_;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  fplbase::AssetManager* asset_manager_;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="keywordtype">float</span> culling_distance_squared_;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <span class="comment">// An array of vectors we use for keeping track of things we&#39;re going</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="comment">// to render.</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  std::vector&lt;RenderlistEntry&gt; pass_render_list_[RenderPass_Count];</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;};</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;}  <span class="comment">// component_library</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;}  <span class="comment">// corgi</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<a class="code" href="group__corgi__component.html#ga96596b8f7e66e869a70959712ad165a5">CORGI_REGISTER_COMPONENT</a>(<a class="code" href="classcorgi_1_1component__library_1_1_render_mesh_component.html">corgi::component_library::RenderMeshComponent</a>,</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                         <a class="code" href="structcorgi_1_1component__library_1_1_render_mesh_data.html">corgi::component_library::RenderMeshData</a>)</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="preprocessor">#endif  // CORGI_COMPONENT_LIBRARY_RENDERMESH_H_</span></div>
<div class="ttc" id="classcorgi_1_1_component_interface_html_a8fcb3126b70ec692558ecb4ba7e50eb2"><div class="ttname"><a href="classcorgi_1_1_component_interface.html#a8fcb3126b70ec692558ecb4ba7e50eb2">corgi::ComponentInterface::RawDataUniquePtr</a></div><div class="ttdeci">std::unique_ptr&lt; uint8_t, std::function&lt; void(uint8_t *)&gt; &gt; RawDataUniquePtr</div><div class="ttdoc">A pointer type for exported raw data. </div><div class="ttdef"><b>Definition:</b> component_interface.h:63</div></div>
<div class="ttc" id="camera__interface_8h_html"><div class="ttname"><a href="camera__interface_8h.html">camera_interface.h</a></div></div>
<div class="ttc" id="classcorgi_1_1_component_html"><div class="ttname"><a href="classcorgi_1_1_component.html">corgi::Component</a></div><div class="ttdoc">A Component is an object that encapsulates all data and logic for Entities of a particular type...</div><div class="ttdef"><b>Definition:</b> component.h:42</div></div>
<div class="ttc" id="structcorgi_1_1component__library_1_1_render_mesh_data_html"><div class="ttname"><a href="structcorgi_1_1component__library_1_1_render_mesh_data.html">corgi::component_library::RenderMeshData</a></div><div class="ttdef"><b>Definition:</b> rendermesh.h:34</div></div>
<div class="ttc" id="classcorgi_1_1component__library_1_1_render_mesh_component_html_ae3f54f9784d1db919d147012eb663dd6"><div class="ttname"><a href="classcorgi_1_1component__library_1_1_render_mesh_component.html#ae3f54f9784d1db919d147012eb663dd6">corgi::component_library::RenderMeshComponent::UpdateAllEntities</a></div><div class="ttdeci">virtual void UpdateAllEntities(WorldTime)</div><div class="ttdoc">Updates all Entities. This is normally called, once per frame, by the EntityManager. </div><div class="ttdef"><b>Definition:</b> rendermesh.h:125</div></div>
<div class="ttc" id="classcorgi_1_1component__library_1_1_render_mesh_component_html_a38c1ef58ad2612b6c2f1abbdd1e5264b"><div class="ttname"><a href="classcorgi_1_1component__library_1_1_render_mesh_component.html#a38c1ef58ad2612b6c2f1abbdd1e5264b">corgi::component_library::RenderMeshComponent::ExportRawData</a></div><div class="ttdeci">virtual RawDataUniquePtr ExportRawData(const EntityRef &amp;entity) const </div><div class="ttdoc">Override this function to return raw data that can be read back later. </div></div>
<div class="ttc" id="group__corgi__entity_html_ga754f75a6aad33aa11de5084743ee3f98"><div class="ttname"><a href="group__corgi__entity.html#ga754f75a6aad33aa11de5084743ee3f98">corgi::WorldTime</a></div><div class="ttdeci">int WorldTime</div><div class="ttdoc">A typedef that represents time in the game. </div><div class="ttdef"><b>Definition:</b> entity_common.h:69</div></div>
<div class="ttc" id="structcorgi_1_1component__library_1_1_renderlist_entry_html"><div class="ttname"><a href="structcorgi_1_1component__library_1_1_renderlist_entry.html">corgi::component_library::RenderlistEntry</a></div><div class="ttdef"><b>Definition:</b> rendermesh.h:94</div></div>
<div class="ttc" id="classcorgi_1_1component__library_1_1_render_mesh_component_html_ae4668233d5dc9ea93cfe9471ef84775d"><div class="ttname"><a href="classcorgi_1_1component__library_1_1_render_mesh_component.html#ae4668233d5dc9ea93cfe9471ef84775d">corgi::component_library::RenderMeshComponent::Init</a></div><div class="ttdeci">virtual void Init()</div><div class="ttdoc">Override this function with code that should be executed when the Component is added to the EntityMan...</div></div>
<div class="ttc" id="classcorgi_1_1component__library_1_1_render_mesh_component_html"><div class="ttname"><a href="classcorgi_1_1component__library_1_1_render_mesh_component.html">corgi::component_library::RenderMeshComponent</a></div><div class="ttdef"><b>Definition:</b> rendermesh.h:109</div></div>
<div class="ttc" id="classcorgi_1_1component__library_1_1_render_mesh_component_html_a4d7fe3e860e1ae50e396fa3ca44013b0"><div class="ttname"><a href="classcorgi_1_1component__library_1_1_render_mesh_component.html#a4d7fe3e860e1ae50e396fa3ca44013b0">corgi::component_library::RenderMeshComponent::InitEntity</a></div><div class="ttdeci">virtual void InitEntity(EntityRef &amp;)</div><div class="ttdoc">Override this function with code that should be executed when an Entity is added to the Component...</div></div>
<div class="ttc" id="transform_8h_html"><div class="ttname"><a href="transform_8h.html">transform.h</a></div></div>
<div class="ttc" id="classcorgi_1_1component__library_1_1_render_mesh_component_html_ab0462ba9516a7327c2f07a8621b39f5c"><div class="ttname"><a href="classcorgi_1_1component__library_1_1_render_mesh_component.html#ab0462ba9516a7327c2f07a8621b39f5c">corgi::component_library::RenderMeshComponent::AddFromRawData</a></div><div class="ttdeci">virtual void AddFromRawData(EntityRef &amp;entity, const void *raw_data)</div><div class="ttdoc">Creates and populates an Entity from raw data. Components that want to be able to be constructed via ...</div></div>
<div class="ttc" id="classcorgi_1_1_vector_pool_1_1_vector_pool_reference_html"><div class="ttname"><a href="classcorgi_1_1_vector_pool_1_1_vector_pool_reference.html">corgi::VectorPool::VectorPoolReference</a></div><div class="ttdoc">A reference object for pointing into the vector pool. It acts as a pointer for vector pool elements a...</div><div class="ttdef"><b>Definition:</b> vector_pool.h:71</div></div>
<div class="ttc" id="classcorgi_1_1_camera_interface_html"><div class="ttname"><a href="classcorgi_1_1_camera_interface.html">corgi::CameraInterface</a></div><div class="ttdoc">An interface for 3D cameras, allowing them to have position, facing field of view, etc. Libraries can use this to pass around generic cameras that the game itself can implement the logic for. </div><div class="ttdef"><b>Definition:</b> camera_interface.h:31</div></div>
<div class="ttc" id="component_8h_html"><div class="ttname"><a href="component_8h.html">component.h</a></div></div>
<div class="ttc" id="group__corgi__component_html_ga96596b8f7e66e869a70959712ad165a5"><div class="ttname"><a href="group__corgi__component.html#ga96596b8f7e66e869a70959712ad165a5">CORGI_REGISTER_COMPONENT</a></div><div class="ttdeci">#define CORGI_REGISTER_COMPONENT(ComponentType, DataType)</div><div class="ttdef"><b>Definition:</b> component_id_lookup.h:48</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-49880327-7', 'google.github.io');
ga('send', 'pageview');
</script>
</body>
</html>
